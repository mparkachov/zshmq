#!/usr/bin/env sh
set -eu

ZSHMQ_ROOT=$(
	CDPATH= cd -- "$(dirname -- "$0")" && pwd
)
export ZSHMQ_ROOT

# Load getoptions once so command implementations can rely on it.
# shellcheck disable=SC1090
. "${ZSHMQ_ROOT}/vendor/getoptions/lib/getoptions_base.sh"
# shellcheck disable=SC1090
. "${ZSHMQ_ROOT}/vendor/getoptions/lib/getoptions_abbr.sh"
# shellcheck disable=SC1090
. "${ZSHMQ_ROOT}/vendor/getoptions/lib/getoptions_help.sh"

# Load command implementations.
# shellcheck disable=SC1091
. "${ZSHMQ_ROOT}/lib/ctx_new.sh"

if [ $# -eq 0 ]; then
	printf '%s\n' 'Usage: zshmq <command> [options]' >&2
	exit 1
fi

command_name=$1
shift

case $command_name in
	ctx_new)
		ctx_new "$@"
		;;
	*)
		printf 'zshmq: unknown command -- %s\n' "$command_name" >&2
		exit 1
		;;
esac
